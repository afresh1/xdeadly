#!/usr/bin/perl
use Mojo::Base -strict;
use Test::Mojo;
use Test::More;

use XDeadly::Post;

use FindBin;
## no critic RequireBarewordIncludes
require "$FindBin::Bin/../../xdeadly";

my $t = Test::Mojo->new;

my %times = (
    0  => '0:00',
    1  => '0:00',
    30 => '0:00',
    59 => '0:00',

    60  => '0:01',
    61  => '0:01',
    90  => '0:01',
    119 => '0:01',

    120 => '0:02',
    121 => '0:02',

    3599 => '0:59',
    3600 => '1:00',
    3601 => '1:00',
    3660 => '1:01',

    57599 => '15:59',
    57600 => '16:00',
    57601 => '16:00',
    57659 => '16:00',
    57660 => '16:01',
    57661 => '16:01',

    86399 => '23:59',
    86400 => '1d0:00',
    86401 => '1d0:00',
    86460 => '1d0:01',
    86461 => '1d0:01',

    431999 => '4d23:59',
    432000 => '5d',
    432001 => '5d',
    432061 => '5d',

    604799 => '6d',
    604800 => '7d',
    604860 => '7d',

    2591999 => '29d',
    2592000 => '30d',
    2592060 => '30d',

    5183999 => '59d',
    5184000 => '60d',
    5184060 => '60d',

    31535999 => '364d',
    31536000 => '365d',
    31536060 => '365d',

    63071999 => '729d',
    63072000 => '730d',
    63072060 => '730d',
);

foreach my $seconds ( sort { $a <=> $b } keys %times ) {
    my $epoch = time - $seconds;
    my $got = $t->app->human_time($epoch);
    is $got, $times{$seconds}, "[$seconds] is right [$got]";
}

done_testing;
